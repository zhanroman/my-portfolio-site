<!doctype html>
<html lang="ru" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <title>ZhanRoman — Frontend & UX/UI</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles/app.css" />
    <link rel="stylesheet" href="styles/page-case.css" />
    <script src="https://cdn.lordicon.com/lordicon.js"></script>
  </head>
  <body>
    <div id="header-placeholder"></div>
    <main class="case" id="top">
      <div class="case-progress js-reading-progress"></div>

      <section class="case-hero" id="hero" data-animate>
        <div class="case-shell">
          <div class="case-hero__badge">Кейс</div>
          <h1 class="case-hero__title">
            Автоматизация печатных форм: от Google Docs к шаблонам RetailCRM
          </h1>
          <p class="case-hero__lead">
            От ручных Google Docs к автоматическим пиксель‑перфект формам,
            которые генерируются за секунды
          </p>
          <p class="case-hero__sub highlight-thought">
            Одна централизованная система шаблонов убрала ручной труд менеджеров
            и обеспечила одинаковый вид всего пакета документов.
          </p>
          <div class="case-hero__cta">
            <a href="https://t.me/zhan_roma" class="btn btn--primary"
              >Связаться в Telegram</a
            >
          </div>
        </div>
      </section>

      <button
        class="toc-fab js-toc-fab"
        aria-label="Оглавление"
        aria-expanded="false"
      >
        Оглавление
      </button>

      <div class="case-shell">
        <div class="case-layout">
          <aside class="case-toc js-case-toc" aria-label="Оглавление">
            <nav class="case-toc__nav">
              <h3 class="case-toc__title">Оглавление</h3>
              <ol class="case-toc__list js-toc-list">
                <li><a href="#hero">Вступление</a></li>
                <li><a href="#problem">Проблема</a></li>
                <li><a href="#needs">Что требовалось</a></li>
                <li><a href="#solution">Решение</a></li>
                <li><a href="#logic">Динамическая логика</a></li>
                <li><a href="#pixel">Pixel‑perfect</a></li>
                <li><a href="#code">Фрагменты кода</a></li>
                <li><a href="#consistency">Единый стиль</a></li>
                <li><a href="#metrics">Результаты</a></li>
                <li><a href="#scaling">Расширение</a></li>
                <li><a href="#faq">FAQ</a></li>
                <li><a href="#contact">Связаться</a></li>
              </ol>
            </nav>
            <button class="case-toc__close js-toc-close" aria-label="Закрыть">
              &times;
            </button>
          </aside>

          <div class="case-content-flow" id="caseContentFlow2">
            <section class="case-section" id="problem" data-animate>
              <h2 class="case-h2">Исходная ситуация</h2>
              <div class="case-grid case-grid--split">
                <div>
                  <p>
                    Документы формировались вручную в Google Docs. Каждый
                    менеджер открывал шаблон, копировал, дописывал данные,
                    выравнивал таблицы и линии. Высокая визуальная планка
                    клиента делала процесс ещё затратнее: любое расхождение в
                    межстрочном интервале или ширине столбца отправляло форму
                    «на доработку».
                  </p>
                  <ul class="case-list">
                    <li>Время на пакет документов: до 25–30 минут.</li>
                    <li>Риск опечаток и разного формата чисел.</li>
                    <li>Повторный ввод данных, которые уже есть в заказе.</li>
                    <li>
                      Несогласованность оформления при правках разными людьми.
                    </li>
                  </ul>
                </div>
                <div class="case-card case-card--accent">
                  <h3 class="case-h3-sm">Болевые точки</h3>
                  <ul class="case-list case-list--checked">
                    <li>Ручное форматирование таблиц.</li>
                    <li>Скрытие/показ условных секций.</li>
                    <li>Скидки: процент + фикс внутри одной строки.</li>
                    <li>Сборка «пакета» из нескольких форм.</li>
                    <li>Сохранение эстетики исходных Google Docs.</li>
                  </ul>
                </div>
              </div>
            </section>

            <section class="case-section" id="needs" data-animate>
              <h2 class="case-h2">Что требовалось бизнесу</h2>
              <div class="case-sol-points">
                <div class="case-sol-item">
                  <h3 class="case-h3-sm">Пакет форм</h3>
                  <p>
                    Заявка, Наряд-заказ, Разрешение на выдачу, Накладная
                    доставки, Акт, Счёт.
                  </p>
                </div>
                <div class="case-sol-item">
                  <h3 class="case-h3-sm">Пиксель‑перфект</h3>
                  <p>Повтор ширин, толщин линий, интервалов из Google Docs.</p>
                </div>
                <div class="case-sol-item">
                  <h3 class="case-h3-sm">Автоматизация</h3>
                  <p>
                    Генерация всей логики за 1–2 клика без ручного
                    редактирования.
                  </p>
                </div>
                <div class="case-sol-item">
                  <h3 class="case-h3-sm">Условные блоки</h3>
                  <p>
                    Показывать только релевантные секции: детали клиента,
                    товары, услуги.
                  </p>
                </div>
                <div class="case-sol-item">
                  <h3 class="case-h3-sm">Единый стиль</h3>
                  <p>Идентичный брендовый заголовок и шапка во всех формах.</p>
                </div>
                <div class="case-sol-item">
                  <h3 class="case-h3-sm">Скрытие пустого</h3>
                  <p>Ни одной «пустой» строки — раздел просто не рендерится.</p>
                </div>
              </div>
            </section>

            <section class="case-section" id="solution" data-animate>
              <h2 class="case-h2">Подход к решению</h2>
              <p class="case-lead">
                Серия адаптированных HTML/Twig шаблонов с минимальной логикой на
                этапе рендеринга и жёстко контролируемой сеткой colgroup для
                точного соответствия исходным макетам.
              </p>
              <div class="case-grid case-grid--split">
                <div>
                  <ul class="case-list case-list--checked">
                    <li>
                      Единый базовый микро-набор классов (text-center, bg-gray,
                      пр.).
                    </li>
                    <li>
                      Оптимизация: один проход для определения флагов секций до
                      вывода содержимого.
                    </li>
                    <li>
                      Комбинированная скидка: проценты + фикс → расчёт новой
                      цены + зачёркивание старой.
                    </li>
                    <li>
                      Авто-формула итоговой фразы (товары, услуги или их
                      сочетание).
                    </li>
                    <li>
                      Стили без внешних зависимостей — стабильность при печати
                      PDF.
                    </li>
                  </ul>
                </div>
                <div class="case-note">
                  <strong>Сроки:</strong> одна форма ~2 дня с учётом
                  согласований. Весь пакет — сжатый цикл поставки за счёт
                  повторного использования паттернов.
                </div>
              </div>
            </section>

            <section class="case-section" id="logic" data-animate>
              <h2 class="case-h2">Динамическая логика &amp; условия</h2>
              <div class="case-features">
                <div class="feat">
                  <h3>Предварительный анализ</h3>
                  <p>Собираем флаги наличия блоков до рендера таблиц.</p>
                </div>
                <div class="feat">
                  <h3>Сложные скидки</h3>
                  <p>Процент + фикс в одной строке без потери округлений.</p>
                </div>
                <div class="feat">
                  <h3>Гибкие статусы</h3>
                  <p>
                    Отбор позиций по статусу (в заявку, в выдачу, в доставку).
                  </p>
                </div>
                <div class="feat">
                  <h3>Чистый вывод</h3>
                  <p>Отсутствие данных = полное скрытие блока.</p>
                </div>
                <div class="feat">
                  <h3>Единый формат чисел</h3>
                  <p>Пробелы как разделители тысяч, управляемые десятичные.</p>
                </div>
                <div class="feat">
                  <h3>Изоляция расчётов</h3>
                  <p>Расчёты внутри минимальных Twig выражений.</p>
                </div>
                <div class="feat">
                  <h3>Условные колонки</h3>
                  <p>
                    Колонки скидок появляются только при фактической экономии.
                  </p>
                </div>
                <div class="feat">
                  <h3>Адаптация акта</h3>
                  <p>
                    Акт и счёт — собственная компоновка обязательных реквизитов.
                  </p>
                </div>
              </div>
            </section>

            <section class="case-section" id="pixel" data-animate>
              <h2 class="case-h2">Pixel‑perfect выполнение</h2>
              <p class="case-lead">
                Сохранили структуру визуального языка клиента: плотность сетки,
                визуальный ритм, контраст заголовков и столбцов без «плавающих»
                ширин.
              </p>
              <div class="case-arch-wrapper">
                <div class="case-arch-diagrams">
                  <div class="case-arch-block">
                    <h3 class="case-h3-sm">Точность сетки</h3>
                    <ul class="case-list">
                      <li>
                        Использованы фиксированные проценты в colgroup (сумма
                        100%).
                      </li>
                      <li>Все бордеры 0.5pt: соответствие печати.</li>
                      <li>
                        Контроль межстрочных интервалов за счёт выборки шрифта и
                        размера.
                      </li>
                    </ul>
                  </div>
                  <div class="case-arch-block">
                    <h3 class="case-h3-sm">Причина успеха</h3>
                    <ul class="case-list">
                      <li>Повторное переиспользование шаблонного каркаса.</li>
                      <li>Минимум «магии» — простые, проверяемые условия.</li>
                      <li>Сокращение точек расхождения для разных форм.</li>
                    </ul>
                  </div>
                </div>
                <div class="case-arch-text">
                  <h3 class="case-h3-sm">Риск «дрейфа»</h3>
                  <p>
                    Чтобы при будущих правках не «поплыл» дизайн, все значения
                    (ширины, padding, размер шрифта) задокументированы прямо в
                    шаблоне и вынесены в повторяющиеся блоки.
                  </p>
                </div>
              </div>
            </section>

            <section class="case-section" id="code" data-animate>
              <h2 class="case-h2">Ключевые фрагменты кода</h2>

              <div class="snippet-wrap">
                <h3 class="case-h3-sm">
                  1. Предварительное определение флагов секций
                </h3>
                <pre class="code"><code>{# Определяем что выводить #}
{% set hasCustomerItems = false %}
{% for f in [
  order.customFields.cf_part1, order.customFields.cf_part2, order.customFields.cf_part3,
  order.customFields.cf_part4, order.customFields.cf_part5, order.customFields.cf_part6,
  order.customFields.cf_part7, order.customFields.cf_part8, order.customFields.cf_part9,
  order.customFields.cf_part10
] %}
  {% if f %}{% set hasCustomerItems = true %}{% break %}{% endif %}
{% endfor %}

{% set hasProducts = false %}
{% set hasServices = false %}
{% for line in order.availableOrderProducts %}
  {% if line.status == 'В заявку на работы' %}
    {% if line.offer.product.typeCode == 'product' %}{% set hasProducts = true %}{% endif %}
    {% if line.offer.product.typeCode == 'service' %}{% set hasServices = true %}{% endif %}
  {% endif %}
{% endfor %}</code></pre>
              </div>

              <div class="snippet-wrap">
                <h3 class="case-h3-sm">2. Условный вывод колонки скидок</h3>
                <pre class="code"><code>{% set anyDiscount = false %}
{% for item in order.availableOrderProducts %}
  {% if item.offer.product.typeCode == 'service' and (order.discountPercent > 0 or item.discountTotal > 0) %}
    {% set anyDiscount = true %}
    {% break %}
  {% endif %}
{% endfor %}

<thead>
  <tr class="bg-gray">
    <th>№</th>
    <th class="text-left">Услуга</th>
    <th class="text-center">Свойства</th>
    <th class="text-center">Цена</th>
    {% if anyDiscount %}
      <th class="text-center">Скидка</th>
      <th class="text-center">После скидки</th>
    {% endif %}
    <th class="text-center">Кол-во</th>
    <th class="text-center">Сумма</th>
  </tr>
</thead></code></pre>
              </div>

              <div class="snippet-wrap">
                <h3 class="case-h3-sm">
                  3. Расчёт комбинированной скидки (процент + фикс)
                </h3>
                <pre
                  class="code"
                ><code>{# price_after = initial - (percent_part + flat_part) #}
{% set percent_part = item.initialPrice * (order.discountPercent / 100) %}
{% set flat_part = item.discountTotal %}
{% set total_disc_per_unit = percent_part + flat_part %}
{% set discounted = item.initialPrice - total_disc_per_unit %}
<td class="text-right">
  {% if total_disc_per_unit > 0 %}<del>{{ item.initialPrice|number_format(0, ',', ' ') }}</del>
  {% else %}{{ item.initialPrice|number_format(0, ',', ' ') }}{% endif %}
</td>
{% if anyDiscount %}
  <td class="text-right bg-gray">
    {% if percent_part > 0 %}{{ order.discountPercent|round }}% ({{ percent_part|number_format(0, ',', ' ') }}){% elseif flat_part > 0 %}{{ flat_part|number_format(0, ',', ' ') }}{% endif %}
  </td>
  <td class="text-right bg-gray">{{ discounted|number_format(0, ',', ' ') }}</td>
{% endif %}</code></pre>
              </div>

              <div class="snippet-wrap">
                <h3 class="case-h3-sm">4. Итоговая формулировка</h3>
                <pre class="code"><code>{% if hasProducts and hasServices %}
  {% set totalLabel = 'ИТОГО ТОВАРОВ И УСЛУГ НА СУММУ:' %}
{% elseif hasServices %}
  {% set totalLabel = 'ИТОГО УСЛУГ НА СУММУ:' %}
{% elseif hasProducts %}
  {% set totalLabel = 'ИТОГО ТОВАРОВ НА СУММУ:' %}
{% else %}
  {% set totalLabel = 'ИТОГО К ОПЛАТЕ:' %}
{% endif %}
<p class="total">{{ totalLabel }} {{ order.totalSumm|number_format(2, ',', ' ') }} руб.</p></code></pre>
              </div>

              <div class="snippet-wrap">
                <h3 class="case-h3-sm">
                  5. Скрытие пустых блоков без заглушек
                </h3>
                <pre class="code"><code>{% if hasCustomerItems %}
<table class="customer-items">
  <!-- колонки ... -->
  <tbody>
  {% set row = 1 %}
  {% for ref in customerParts %}
    {% if ref.value %}
      <tr>
        <td class="text-center">{{ row }}</td>
        <td>{{ ref.value }}</td>
        <td class="text-center">{{ ref.qty }}</td>
      </tr>
      {% set row = row + 1 %}
    {% endif %}
  {% endfor %}
  </tbody>
</table>
{% endif %}</code></pre>
              </div>

              <div class="snippet-wrap">
                <h3 class="case-h3-sm">
                  6. Унификация форматирования цены (псевдо-хелпер)
                </h3>
                <pre
                  class="code"
                ><code>{# Twig не всегда имеет фильтр: создаём macro #}
{% macro money(v, decimals) %}
  {{- v|number_format(decimals, ',', ' ') -}}
{% endmacro %}

{# Использование: #}
<td class="text-right">{{ _self.money(item.initialPrice, 0) }}</td></code></pre>
              </div>
            </section>

            <section class="case-section" id="consistency" data-animate>
              <h2 class="case-h2">Как обеспечили единый стиль</h2>
              <div class="case-grid case-grid--split">
                <div>
                  <ul class="case-list case-list--checked">
                    <li>Одинаковая шапка: логотип / сайт / телефон.</li>
                    <li>
                      Стандартизованный набор классов шрифта и выравнивания.
                    </li>
                    <li>Синхронные названия секций между формами.</li>
                    <li>
                      Унификация расчёта скидок (один паттерн — разный
                      контекст).
                    </li>
                  </ul>
                </div>
                <div class="case-note">
                  <strong>Результат:</strong> менеджеры берут любую форму —
                  визуально она «из одного комплекта», сокращая когнитивную
                  нагрузку у клиента.
                </div>
              </div>
            </section>

            <section class="case-section" id="metrics" data-animate>
              <h2 class="case-h2">Первые результаты</h2>
              <p class="case-lead">
                Цифры ориентировочные, отражают порядок эффекта после перехода
                на автоматическую генерацию.
              </p>
              <div class="case-metrics">
                <div class="metric">
                  <div class="metric__value">-85%</div>
                  <div class="metric__label">времени на пакет документов</div>
                </div>
                <div class="metric">
                  <div class="metric__value">~4 мин → 35 c</div>
                  <div class="metric__label">формирование одной формы</div>
                </div>
                <div class="metric">
                  <div class="metric__value">0</div>
                  <div class="metric__label">ручных правок форматирования</div>
                </div>
                <div class="metric">
                  <div class="metric__value">-60%</div>
                  <div class="metric__label">риск ошибок в итогах/скидках</div>
                </div>
                <div class="metric">
                  <div class="metric__value">100%</div>
                  <div class="metric__label">визуальное единообразие</div>
                </div>
                <div class="metric">
                  <div class="metric__value">2 дн</div>
                  <div class="metric__label">цикл разработки одной формы</div>
                </div>
              </div>
            </section>

            <section class="case-section" id="scaling" data-animate>
              <h2 class="case-h2">Дальнейшее развитие</h2>
              <div class="roadmap">
                <div class="roadmap-item">
                  <h3>QR-коды</h3>
                  <p>Автогенерация ссылок на оплату / отслеживание.</p>
                </div>
                <div class="roadmap-item">
                  <h3>Подписи</h3>
                  <p>Встраивание цифровой подписи без ручной вставки.</p>
                </div>
                <div class="roadmap-item">
                  <h3>Мультиязык</h3>
                  <p>RU/EN версии по флагу клиента.</p>
                </div>
                <div class="roadmap-item">
                  <h3>Штрих-коды</h3>
                  <p>Для складского быстрого сканирования.</p>
                </div>
              </div>
            </section>

            <section class="case-section" id="faq" data-animate>
              <h2 class="case-h2">FAQ</h2>
              <div class="faq js-faq-accordion">
                <div class="faq-item">
                  <button class="faq-item__head" aria-expanded="true">
                    <span class="faq-item__icon"></span>Можно ли адаптировать
                    под другие типы документов?
                  </button>
                  <div class="faq-item__panel">
                    <p>
                      Да. Каркас легко расширить: добавляется шапка + секции
                      условия.
                    </p>
                  </div>
                </div>
                <div class="faq-item">
                  <button class="faq-item__head" aria-expanded="false">
                    <span class="faq-item__icon"></span>Что если меняется логика
                    скидок?
                  </button>
                  <div class="faq-item__panel">
                    <p>
                      Меняем централизованный блок расчёта — во всех формах
                      обновление едино.
                    </p>
                  </div>
                </div>
                <div class="faq-item">
                  <button class="faq-item__head" aria-expanded="false">
                    <span class="faq-item__icon"></span>Насколько сложно
                    добавить новый реквизит?
                  </button>
                  <div class="faq-item__panel">
                    <p>Обычно 5–10 минут: поле + условие + вывод.</p>
                  </div>
                </div>
                <div class="faq-item">
                  <button class="faq-item__head" aria-expanded="false">
                    <span class="faq-item__icon"></span>Можно ли сделать
                    многоязычные версии?
                  </button>
                  <div class="faq-item__panel">
                    <p>
                      Да. Абстрагированы строки — подстановка локалей через
                      словарь.
                    </p>
                  </div>
                </div>
                <div class="faq-item">
                  <button class="faq-item__head" aria-expanded="false">
                    <span class="faq-item__icon"></span>Как подключить цифровую
                    подпись / QR?
                  </button>
                  <div class="faq-item__panel">
                    <p>
                      Через генерацию изображений/встраивание SVG на этапе
                      рендера.
                    </p>
                  </div>
                </div>
                <div class="faq-item">
                  <button class="faq-item__head" aria-expanded="false">
                    <span class="faq-item__icon"></span>Это влияет на
                    производительность CRM?
                  </button>
                  <div class="faq-item__panel">
                    <p>
                      Незначительно: шаблоны лёгкие, вычисления локальные без
                      внешних запросов.
                    </p>
                  </div>
                </div>
              </div>
            </section>

            <section
              class="case-section case-contact"
              id="contact"
              data-animate
            >
              <h2 class="case-h2">Ускорим и ваш документооборот</h2>
              <p class="case-lead">
                Покажу как превратить ручные Google / Excel шаблоны в единый
                автоматический пакет.
              </p>
              <div class="contact-cta">
                <a
                  href="https://t.me/zhan_roma"
                  class="btn btn--primary btn--xl"
                  >Связаться в Telegram</a
                >
                <a
                  href="mailto:my@zhanroman.online"
                  class="btn btn--ghost btn--xl"
                  >Email</a
                >
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>
    <div id="footer-placeholder"></div>
    <script src="scripts/common-scripts.js"></script>
    <script src="scripts/case-scripts.js"></script>
  </body>
</html>
